# 使用 Cursor AI 进行自动分析

## 概述

你可以直接使用 Cursor 本身的 AI 能力来分析对话记录，**无需配置任何 API Key**！

## 使用方法

### 方法 1: 直接在 Cursor 中请求（最简单）

在 Cursor 中直接告诉 AI：

```
请帮我分析今天的对话并生成总结
```

或者：

```
使用 Cursor AI 分析 2026-01-23 的对话记录，并生成结构化的 Markdown 总结
```

Cursor 会自动：
1. 从后端获取对话数据
2. 使用 Cursor 的 AI 能力分析对话
3. 生成结构化的总结
4. 保存到文件

### 方法 2: 使用 Cursor 命令

在 Cursor 中输入：

```
@analyze-dialogues today
```

或

```
@analyze-dialogues 2026-01-23
```

### 方法 3: 使用辅助脚本

```bash
# 1. 获取对话数据
node scripts/analyze-with-cursor.js 2026-01-23

# 2. 在 Cursor 中使用 AI 分析输出的对话内容
# 3. 告诉 Cursor 保存总结
```

## 工作流程

当你请求 Cursor 分析对话时，它会：

1. **获取对话数据**
   - 从 `http://localhost:3001/api/dialogues/{日期}` 获取对话
   - 如果后端未运行，会提示你

2. **分析对话内容**
   - 提取主要话题（从用户问题中）
   - 提取知识点（从 AI 回复中）
   - 生成关键洞察

3. **生成 Markdown 总结**
   - 按照标准格式生成结构化的总结
   - 包含概览、话题、知识点和洞察

4. **保存总结**
   - 通过 API 保存到 `backend/data/summaries/{日期}.md`
   - 或直接保存到文件

## 总结格式

Cursor 会生成以下格式的总结：

```markdown
# {日期} 对话总结

## 📊 概览
- 对话总数: {总数}
- 用户消息: {用户消息数}
- AI回复: {AI回复数}

## 🎯 主要话题

1. {话题1}
2. {话题2}
...

## 💡 知识点总结

### 1. {知识点标题}
{详细说明}

### 2. {知识点标题}
{详细说明}

...

## 🔍 关键洞察

{总结关键洞察和建议}
```

## 优势

✅ **无需 API Key** - 直接使用 Cursor 的 AI 能力  
✅ **更智能** - Cursor 的 AI 理解上下文更好  
✅ **即时分析** - 随时可以分析任意日期的对话  
✅ **灵活** - 可以自定义分析要求和格式  

## 示例

### 示例 1: 分析今天的对话

你在 Cursor 中说：
```
请帮我分析今天的对话并生成总结
```

Cursor 会：
1. 获取今天的对话
2. 分析并生成总结
3. 保存到文件

### 示例 2: 分析指定日期

你在 Cursor 中说：
```
分析 2026-01-23 的对话，重点关注技术知识点
```

Cursor 会：
1. 获取 2026-01-23 的对话
2. 重点提取技术知识点
3. 生成总结并保存

## 注意事项

- 确保后端服务正在运行（http://localhost:3001）
- 如果指定日期没有对话，Cursor 会提示你
- 生成的总结会保存到 `backend/data/summaries/` 目录
- 可以在 Web 界面查看生成的总结

## 与智能模拟分析的对比

| 特性 | 智能模拟分析 | Cursor AI 分析 |
|------|------------|--------------|
| 需要配置 | ❌ 无需配置 | ❌ 无需配置 |
| AI 能力 | 基于规则 | Cursor AI |
| 分析质量 | 良好 | 优秀 |
| 灵活性 | 固定规则 | 可自定义 |
| 使用方式 | 自动（定时） | 手动（按需） |

两种方式可以结合使用：
- **智能模拟分析**：每天早上 8 点自动分析
- **Cursor AI 分析**：随时按需分析，获得更高质量的结果
